# FoodyLog Project Structure

## Root Directory Structure
```
app/
├── public/                    # Static assets (PWA icons, robots.txt)
├── src/
│   ├── assets/               # Images, fonts, static resources
│   ├── components/           # Reusable UI components
│   │   ├── ui/              # shadcn/ui base components
│   │   ├── meal/            # Meal-specific components
│   │   ├── auth/            # Authentication components
│   │   └── layout/          # Layout and navigation components
│   ├── pages/               # Route components (React Router)
│   │   ├── auth/            # Login, register, profile pages
│   │   ├── meals/           # Meal list, detail, add/edit pages
│   │   ├── analytics/       # Analytics and insights pages
│   │   └── settings/        # User settings and preferences
│   ├── hooks/               # Custom React hooks
│   │   ├── useCamera.ts     # Camera integration
│   │   ├── useOfflineSync.ts # Offline functionality
│   │   └── useAuth.ts       # Authentication helpers
│   ├── lib/                 # Utility libraries and configurations
│   │   ├── convex/          # Convex client setup
│   │   ├── auth/            # Clerk authentication config
│   │   ├── config/          # App configuration
│   │   └── utils/           # General utilities
│   ├── stores/              # Client-side state management (minimal)
│   ├── types/               # TypeScript type definitions
│   │   ├── meal.ts          # Meal-related types
│   │   ├── user.ts          # User and auth types
│   │   └── api.ts           # API response types
│   ├── App.tsx              # Main app component with routing
│   └── main.tsx             # App entry point
├── convex/                  # Backend functions and schema
│   ├── schema.ts            # Database schema definition
│   ├── auth.config.ts       # Authentication configuration
│   ├── functions/           # Convex functions
│   │   ├── meals.ts         # Meal CRUD operations
│   │   ├── users.ts         # User management
│   │   ├── photos.ts        # Photo handling
│   │   ├── analytics.ts     # Analytics queries
│   │   └── social.ts        # Social features (Phase 3)
│   ├── lib/                 # Shared backend utilities
│   │   ├── validation.ts    # Server-side validation
│   │   ├── permissions.ts   # Access control helpers
│   │   └── utils.ts         # General utilities
│   └── http.ts              # HTTP actions for external APIs
├── android/                 # Generated by Capacitor
├── ios/                     # Generated by Capacitor
├── index.html               # HTML entry point
├── vite.config.ts           # Vite configuration
├── capacitor.config.ts      # Capacitor configuration
├── tailwind.config.ts       # Tailwind CSS configuration
├── package.json             # Dependencies and scripts
└── bun.lockb                # Bun lock file (commit this, not package-lock.json)
```

## Component Organization Patterns

### UI Components (`src/components/ui/`)
Base shadcn/ui components with custom theming:
- `button.tsx`, `card.tsx`, `input.tsx`, `badge.tsx`
- `dialog.tsx`, `dropdown-menu.tsx`, `toast.tsx`
- Follow shadcn/ui naming and structure conventions

### Feature Components (`src/components/[feature]/`)
Domain-specific components organized by feature:
- `meal/MealCard.tsx`, `meal/MealForm.tsx`, `meal/PhotoCapture.tsx`
- `auth/LoginForm.tsx`, `auth/SignUpForm.tsx`
- `layout/Header.tsx`, `layout/Navigation.tsx`

### Pages (`src/pages/`)
Route components using React Router:
- Use default exports for page components
- Keep pages thin - delegate logic to components and hooks
- Follow naming: `MealListPage.tsx`, `AddMealPage.tsx`

## File Naming Conventions

### Components
- **PascalCase** for component files: `MealCard.tsx`
- **camelCase** for utility files: `formatDate.ts`
- **kebab-case** for shadcn/ui components: `dropdown-menu.tsx`

### Hooks
- Prefix with `use`: `useCamera.ts`, `useOfflineSync.ts`
- Export as named exports for custom hooks

### Types
- **PascalCase** for type names: `Meal`, `User`, `MealFormData`
- Group related types in feature-specific files
- Use interfaces for object shapes, types for unions/primitives

## Import/Export Patterns

### Barrel Exports
Use index files for clean imports:
```typescript
// src/components/meal/index.ts
export { MealCard } from './MealCard';
export { MealForm } from './MealForm';
export { PhotoCapture } from './PhotoCapture';

// Usage
import { MealCard, MealForm } from '~/components/meal';
```

### Path Aliases
Configure path aliases in `vite.config.ts`:
```typescript
// Use ~ for src root
import { MealCard } from '~/components/meal/MealCard';
import { formatDate } from '~/lib/utils';
```

## Convex Backend Structure

### Functions Organization
- Group by feature: `meals.ts`, `users.ts`, `photos.ts`
- Use descriptive function names: `createMeal`, `getUserMeals`, `uploadPhoto`
- Export functions with proper typing

### Schema Organization
- Single `schema.ts` file with all table definitions
- Use consistent naming: `meals`, `users`, `mealPhotos`
- Include proper indexes and relationships

## Configuration Files

### Environment Variables
- Use `.env.example` as template
- Prefix Vite variables with `VITE_`
- Keep sensitive keys in `.env.local` (gitignored)

### TypeScript Configuration
- Strict mode enabled
- Path mapping configured for clean imports
- Proper module resolution for Capacitor and Convex

## Development Workflow

### Branch Structure
- `main` - Production ready code
- `develop` - Integration branch
- `feature/[name]` - Feature development
- `bugfix/[name]` - Bug fixes

### Commit Conventions
Use conventional commits:
- `feat(meals): add photo capture functionality`
- `fix(auth): resolve login redirect issue`
- `docs(readme): update installation instructions`

## Testing Structure
```
src/
├── __tests__/               # Global test utilities
├── components/
│   └── meal/
│       ├── MealCard.tsx
│       └── MealCard.test.tsx # Co-located tests
└── hooks/
    ├── useCamera.ts
    └── useCamera.test.ts     # Co-located tests
```

## Build Outputs
- `dist/` - Web build output (gitignored)
- `android/` - Android project (generated, some files committed)
- `ios/` - iOS project (generated, some files committed)